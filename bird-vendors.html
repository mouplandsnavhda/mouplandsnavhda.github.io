<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="Find trusted bird vendors for Missouri Uplands NAVHDA training events. Contact vendors directly for quail, chukar, and duck availability.">
  <title>Bird Vendors - MoUplands NAVHDA</title>
  
  <link rel="icon" href="./mouplands_cover_files/images/mouplands_logo_white.png" sizes="192x192">
  
  <!-- Bootstrap CSS -->
  <link href="./mouplands_cover_files/bootstrap.min.css" rel="stylesheet">
  <link href="./mouplands_cover_files/theme.min.css" rel="stylesheet">
  <link href="./mouplands_cover_files/custom.css" rel="stylesheet">
  
  <!-- DataTables CSS -->
  <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap4.min.css">
  
  <style>
    body {
      background-color: #f5f5f5;
      padding-top: 2rem;
    }
    
    .vendors-container {
      max-width: 1200px;
      margin: 0 auto;
    }
    
    .card {
      border: none;
      border-radius: 0;
      box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
      margin-bottom: 2rem;
    }
    
    .card-header {
      background-color: #1f2749;
      color: white;
      border-bottom: none;
      padding: 1rem 1.25rem;
    }
    
    .table {
      margin-bottom: 0;
    }
    
    .table thead th {
      background-color: #f8f9fa;
      border-bottom: 2px solid #dee2e6;
      color: #495057;
      font-weight: 600;
      text-transform: uppercase;
      font-size: 0.875rem;
      letter-spacing: 0.5px;
    }
    
    .table tbody tr:hover {
      background-color: rgba(241, 38, 57, 0.05);
    }
    
    .badge-reliable {
      background-color: #2ecd75;
      color: white;
    }
    
    .badge-not-reliable {
      background-color: #f55454;
      color: white;
    }
    
    .badge-unknown {
      background-color: #6c757d;
      color: white;
    }
    
    .dataTables_wrapper .dataTables_filter input {
      border: 1px solid #cdced3;
      border-radius: 0;
      padding: 0.375rem 0.75rem;
    }
    
    .dataTables_wrapper .dataTables_filter input:focus {
      border-color: #f99ea6;
      box-shadow: 0 0 0 0.2rem rgba(241, 38, 57, 0.25);
    }
    
    .dataTables_wrapper .dataTables_length select {
      border: 1px solid #cdced3;
      border-radius: 0;
      padding: 0.375rem 0.75rem;
    }
    
    .dataTables_wrapper .dataTables_paginate .paginate_button {
      border-radius: 0;
      border: 1px solid #dee2e6;
      margin-left: 2px;
    }
    
    .dataTables_wrapper .dataTables_paginate .paginate_button.current {
      background-color: #f12639;
      border-color: #f12639;
      color: white !important;
    }
    
    .dataTables_wrapper .dataTables_paginate .paginate_button:hover {
      background-color: #d60e21;
      border-color: #d60e21;
      color: white !important;
    }
    
    .vendor-info {
      background-color: #f8f9fa;
      border: 1px solid #dee2e6;
      padding: 1rem;
      margin-bottom: 1rem;
      border-radius: 0;
    }
  </style>
</head>

<body>
  <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark" style="opacity: .6;">
    <a class="navbar-brand" href="index.html">MoUplands</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse"
      aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarCollapse">
      <ul class="navbar-nav mr-auto">
        <li class="nav-item">
          <a class="nav-link" href="index.html#why">Join</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="index.html#training">Training</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="index.html#tests">Tests</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="index.html#events">Events</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="index.html#schedule">Schedule</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="index.html#officers">Officers</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="index.html#sponsors">Sponsors</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="bird-vendors.html">Bird Vendors</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="bird-orders.html">Bird Orders</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="payment.html">Payment</a>
        </li>
      </ul>
    </div>
  </nav>

  <div class="container">
    <div class="vendors-container">
      <div class="card">
        <div class="card-header">
          <h1 class="mb-0">MO Uplands Bird Vendor List</h1>
        </div>
        <div class="card-body">
          <div class="vendor-info">
            <h5 class="text-secondary mb-3">About Our Bird Vendors</h5>
            <p class="mb-0">
              This list contains trusted bird vendors that our members have worked with. 
              Please contact vendors directly to check availability and pricing. 
              Some vendors require advance notice for orders outside of normal preserve season.
            </p>
          </div>
          
          <div class="mb-3">
            <label for="stateFilter" class="font-weight-bold mr-2">Filter by State:</label>
            <select id="stateFilter" class="form-control d-inline-block" style="width: auto; min-width: 120px;">
              <option value="">All States</option>
            </select>
          </div>
          
          <div class="table-responsive">
            <table id="vendorTable" class="table table-striped table-hover">
              <thead>
                <tr>
                  <th>Name</th>
                  <th>Location</th>
                  <th>Contact</th>
                  <th>Phone</th>
                  <th>Email</th>
                  <th>Birds Available</th>
                  <th>Notes</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- jQuery + DataTables -->
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap4.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.3.2/papaparse.min.js"></script>
  
  <script>
    const csvUrl = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vSYJjFIqVQF8rvSXpqvDnmCEoo0WO6urNkDHcsI3S4xUW4bn2phQx61dg9I0SKY_w/pub?output=csv';

    Papa.parse(csvUrl, {
      download: true,
      header: true,
      skipEmptyLines: true,
      complete: function(results) {
        console.log('CSV parsing complete:', results);
        const tbody = document.querySelector("#vendorTable tbody");
        const stateSet = new Set();
        const allRows = [];
        
        results.data.forEach(row => {
          console.log('Processing row:', row);
          if (!row["Name"] || row["Name"].trim() === "" || row["Name"].trim() === "Name") return;
          // Extract state abbreviation from Location (last word, 2 uppercase letters)
          let state = '';
          if (row["Location"]) {
            const match = row["Location"].match(/([A-Z]{2})\b/);
            if (match) state = match[1];
          }
          if (state) stateSet.add(state);
          row._state = state;
          allRows.push(row);
        });

        // Populate state dropdown
        const stateFilter = document.getElementById('stateFilter');
        Array.from(stateSet).sort().forEach(state => {
          const opt = document.createElement('option');
          opt.value = state;
          opt.textContent = state;
          stateFilter.appendChild(opt);
        });

        function renderTable(filteredRows) {
          tbody.innerHTML = '';
          filteredRows.forEach(row => {
            const tr = document.createElement("tr");
            tr.innerHTML = `
              <td><strong>${row["Name"] || ""}</strong></td>
              <td>${row["Location"] || ""}</td>
              <td>${row["Contact"] || ""}</td>
              <td>${row["Phone"] || ""}</td>
              <td>${row["Email"] ? `<a href=\"mailto:${row["Email"]}\">${row["Email"]}</a>` : ""}</td>
              <td>${row["Birds"] || ""}</td>
              <td>${row["Notes"] || ""}</td>
            `;
            tbody.appendChild(tr);
          });
        }

        // Initial render
        renderTable(allRows);
        const dataTable = $('#vendorTable').DataTable({
          pageLength: 15,
          lengthChange: true,
          responsive: true,
          autoWidth: false,
          order: [[0, 'asc']],
          language: {
            search: "Search vendors:",
            lengthMenu: "Show _MENU_ vendors per page",
            info: "Showing _START_ to _END_ of _TOTAL_ vendors",
            paginate: {
              first: "First",
              last: "Last",
              next: "Next",
              previous: "Previous"
            }
          }
        });

        // State filter event
        stateFilter.addEventListener('change', function() {
          const selected = this.value;
          dataTable.clear().draw();
          let filtered = allRows;
          if (selected) {
            filtered = allRows.filter(row => row._state === selected);
          }
          renderTable(filtered);
          dataTable.rows.add($('#vendorTable tbody tr')).draw();
        });
      },
      error: function(error) {
        console.error('Error loading CSV:', error);
        document.querySelector("#vendorTable tbody").innerHTML = 
          '<tr><td colspan="7" class="text-center text-muted">Error loading vendor data. Please refresh the page.</td></tr>';
      }
    });
  </script>

  <!-- Footer -->
  <footer class="bg-dark text-light py-4 mt-5">
    <div class="container">
      <div class="row">
        <div class="col-md-6">
          <h5>Missouri Uplands NAVHDA</h5>
          <p class="mb-2">A passionate group of versatile dog enthusiasts with decades of experience.</p>
          <p class="small text-muted">Last updated: January 2025</p>
        </div>
        <div class="col-md-6 text-md-right">
          <h6>Connect With Us</h6>
          <div class="social-links">
            <a href="https://www.facebook.com/pg/NavhdaMoUplands/events/" target="_blank" class="text-light mr-3" title="Facebook Events">
              <i class="fab fa-facebook-f fa-lg"></i>
            </a>
            <a href="https://www.navhda.org/" target="_blank" class="text-light mr-3" title="NAVHDA National">
              <i class="fas fa-globe fa-lg"></i>
            </a>
          </div>
          <div class="mt-2">
            <a href="index.html" class="text-light mr-3">Home</a>
            <a href="bird-orders.html" class="text-light mr-3">Bird Orders</a>
            <a href="pay.html" class="text-light">Payment</a>
          </div>
        </div>
      </div>
    </div>
  </footer>

  <!-- Back to Top Button -->
  <button id="backToTop" title="Back to Top" style="display:none;position:fixed;bottom:40px;right:40px;z-index:9999;background:#f12639;color:#fff;border:none;border-radius:50%;width:48px;height:48px;font-size:2rem;box-shadow:0 2px 8px rgba(0,0,0,0.2);cursor:pointer;transition:opacity 0.3s;">
    &uarr;
  </button>
  <script>
    const backToTopBtn = document.getElementById('backToTop');
    window.addEventListener('scroll', function() {
      if (window.scrollY > 200) {
        backToTopBtn.style.display = 'block';
        backToTopBtn.style.opacity = 1;
      } else {
        backToTopBtn.style.opacity = 0;
        setTimeout(()=>{backToTopBtn.style.display = 'none';}, 300);
      }
    });
    backToTopBtn.addEventListener('click', function() {
      window.scrollTo({top: 0, behavior: 'smooth'});
    });
  </script>
</body>
</html>


