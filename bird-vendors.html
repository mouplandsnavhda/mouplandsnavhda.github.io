<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>Bird Vendors - MoUplands NAVHDA</title>
  
  <!-- Bootstrap CSS -->
  <link href="./mouplands_cover_files/bootstrap.min.css" rel="stylesheet">
  <link href="./mouplands_cover_files/theme.min.css" rel="stylesheet">
  <link href="./mouplands_cover_files/custom.css" rel="stylesheet">
  
  <!-- DataTables CSS -->
  <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap4.min.css">
  
  <style>
    body {
      background-color: #f5f5f5;
      padding-top: 2rem;
    }
    
    .vendors-container {
      max-width: 1200px;
      margin: 0 auto;
    }
    
    .card {
      border: none;
      border-radius: 0;
      box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
      margin-bottom: 2rem;
    }
    
    .card-header {
      background-color: #1f2749;
      color: white;
      border-bottom: none;
      padding: 1rem 1.25rem;
    }
    
    .table {
      margin-bottom: 0;
    }
    
    .table thead th {
      background-color: #f8f9fa;
      border-bottom: 2px solid #dee2e6;
      color: #495057;
      font-weight: 600;
      text-transform: uppercase;
      font-size: 0.875rem;
      letter-spacing: 0.5px;
    }
    
    .table tbody tr:hover {
      background-color: rgba(241, 38, 57, 0.05);
    }
    
    .badge-reliable {
      background-color: #2ecd75;
      color: white;
    }
    
    .badge-not-reliable {
      background-color: #f55454;
      color: white;
    }
    
    .badge-unknown {
      background-color: #6c757d;
      color: white;
    }
    
    .dataTables_wrapper .dataTables_filter input {
      border: 1px solid #cdced3;
      border-radius: 0;
      padding: 0.375rem 0.75rem;
    }
    
    .dataTables_wrapper .dataTables_filter input:focus {
      border-color: #f99ea6;
      box-shadow: 0 0 0 0.2rem rgba(241, 38, 57, 0.25);
    }
    
    .dataTables_wrapper .dataTables_length select {
      border: 1px solid #cdced3;
      border-radius: 0;
      padding: 0.375rem 0.75rem;
    }
    
    .dataTables_wrapper .dataTables_paginate .paginate_button {
      border-radius: 0;
      border: 1px solid #dee2e6;
      margin-left: 2px;
    }
    
    .dataTables_wrapper .dataTables_paginate .paginate_button.current {
      background-color: #f12639;
      border-color: #f12639;
      color: white !important;
    }
    
    .dataTables_wrapper .dataTables_paginate .paginate_button:hover {
      background-color: #d60e21;
      border-color: #d60e21;
      color: white !important;
    }
    
    .vendor-info {
      background-color: #f8f9fa;
      border: 1px solid #dee2e6;
      padding: 1rem;
      margin-bottom: 1rem;
      border-radius: 0;
    }
  </style>
</head>

<body>
  <div class="container">
    <div class="vendors-container">
      <div class="card">
        <div class="card-header">
          <h1 class="mb-0">MO Uplands Bird Vendor List</h1>
        </div>
        <div class="card-body">
          <div class="vendor-info">
            <h5 class="text-secondary mb-3">About Our Bird Vendors</h5>
            <p class="mb-0">
              This list contains trusted bird vendors that our members have worked with. 
              Please contact vendors directly to check availability and pricing. 
              Some vendors require advance notice for orders outside of normal preserve season.
            </p>
          </div>
          
          <div class="table-responsive">
            <table id="vendorTable" class="table table-striped table-hover">
              <thead>
                <tr>
                  <th>Name</th>
                  <th>Location</th>
                  <th>Contact</th>
                  <th>Phone</th>
                  <th>Email</th>
                  <th>Birds Available</th>
                  <th>Notes</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- jQuery + DataTables -->
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap4.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.3.2/papaparse.min.js"></script>
  
  <script>
    const csvUrl = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vSYJjFIqVQF8rvSXpqvDnmCEoo0WO6urNkDHcsI3S4xUW4bn2phQx61dg9I0SKY_w/pub?output=csv';

    Papa.parse(csvUrl, {
      download: true,
      header: true,
      complete: function(results) {
        const tbody = document.querySelector("#vendorTable tbody");
        
        results.data.forEach(row => {
          if (!row["Name"] || row["Name"].trim() === "") return;
          
          const tr = document.createElement("tr");
          
          tr.innerHTML = `
            <td><strong>${row["Name"] || ""}</strong></td>
            <td>${row["Location"] || ""}</td>
            <td>${row["Contact"] || ""}</td>
            <td>${row["Phone"] || ""}</td>
            <td>${row["Email"] ? `<a href="mailto:${row["Email"]}">${row["Email"]}</a>` : ""}</td>
            <td>${row["Birds"] || ""}</td>
            <td>${row["Notes"] || ""}</td>
          `;
          tbody.appendChild(tr);
        });

        $('#vendorTable').DataTable({
          pageLength: 15,
          lengthChange: true,
          responsive: true,
          autoWidth: false,
          order: [[0, 'asc']], // Sort by name by default
          language: {
            search: "Search vendors:",
            lengthMenu: "Show _MENU_ vendors per page",
            info: "Showing _START_ to _END_ of _TOTAL_ vendors",
            paginate: {
              first: "First",
              last: "Last",
              next: "Next",
              previous: "Previous"
            }
          }
        });
      },
      error: function(error) {
        console.error('Error loading CSV:', error);
        document.querySelector("#vendorTable tbody").innerHTML = 
          '<tr><td colspan="7" class="text-center text-muted">Error loading vendor data. Please refresh the page.</td></tr>';
      }
    });
  </script>
</body>
</html>
